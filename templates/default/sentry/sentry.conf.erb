# This sentry config generated by <%= node['fqdn'] %>

# <%= @config %>

<% if node['sentry']['include_settings'] %>
<%= node['sentry']['include_settings'] %> import *
<% end %>

DATABASES = {
  <% for name, dsettings in @databases %>
  "<%= name %>": {
       <% for key, value in dsettings %>
       "<%= key.upcase %>": <% if value.is_a?(Integer) %><%= value %><% else %>"<%= value %>"<% end %>,
       <% end %>
  },
  <% end %>
}

# No trailing slash!
SENTRY_URL_PREFIX = "<%= @prefix %>"

# Set this to false to require authentication
SENTRY_PUBLIC = <%= @public %>

# SENTRY_KEY is a unique randomly generated secret key for your server, and it
# acts as a signing token

SENTRY_KEY = "<%= @private_key %>"

# SENTRY_WEB_HOST = "<%= @web['host'] %>"
# SENTRY_WEB_PORT = "<%= @web['port'] %>"
# SENTRY_WEB_OPTIONS = {
#   <% for @name, @value in @web['options'] %>
#   '<%= @name %>': '<%= @value %>',
#   <% end %>
#}


# Mail server configuration

# For more information check Django's documentation:
#  https://docs.djangoproject.com/en/1.3/topics/email/?from=olddocs#e-mail-backends

EMAIL_BACKEND = "<%= @email['backend'] %>"

EMAIL_HOST = "<%= @email['host'] %>"
EMAIL_HOST_PASSWORD = "<%= @email['password'] %>"
EMAIL_HOST_USER = "<%= @email['user'] %>"
EMAIL_PORT = <%= @email['port'] %>
EMAIL_USE_TLS = <%= @email['use_tls'] || "False" %>


<% for network, params in @social %>
   <% for param, value in params %>
<%= network.upcase %>_<%= param.upcase %> = <% if value.is_a?(Integer) %><%= value %><% else %>"<%= value %>"<% end %>
   <% end %>
<% end %>

SOCIAL_AUTH_CREATE_USERS = <%= @social_auth_create_users %>

# Custom settings
<% for key, value in @custom_settings %>
<%= key.upcase %> = <% if value.is_a?(Integer) %><%= value %><% else %>"<%= value %>"<% end %>
<% end %>

EXTRA_INSTALLED_APPS = [
<% for item in @plugins %>
   '<%= item %>',
<% end %>
<% for item in @third_party_plugins %>
   <% if item['name'] %>
   '<%= item %>',
   <% end %>
<% end %>
]


EXTRA_ALLOWED_HOSTS = ['*']